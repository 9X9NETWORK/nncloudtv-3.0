alter table nnuser alter cntSubscribe set default 0;
alter table nnuser alter cntChannel set default 0;
alter table nnuser alter cntFollower set default 0;
alter table nnuser alter expires set default 0;

- category.py
- content.py
- channel_meta.py            
- billboard
- jobs/category_tag.py
- user
use nnclodutv_nnuser1;
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, true, 'ichi', '陳奕棋', 'curator1@9x9.tv', '喜歡ACG，但是還是有比較少涉入的領域～請大家多多指教!', 'http://a4.sphotos.ak.fbcdn.net/hphotos-ak-snc7/487255_4230090354172_1364920231_n.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, true, 'evonne', 'Evonne', 'curator2@9x9.tv', 'you care;I care;woman care!', 'http://a8.sphotos.ak.fbcdn.net/hphotos-ak-ash4/304426_528514960496996_185500788_n.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, true, 'janetc', 'Janet Chou', 'curator3@9x9.tv', 'Do What I Wanna Do', 'https://fbcdn-sphotos-f-a.akamaihd.net/hphotos-ak-snc7/381156_3382567293342_272921887_n.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, true, 'tanny', 'T Anny', 'curator4@9x9.tv', 'Play!Life.', 'https://fbcdn-sphotos-d-a.akamaihd.net/hphotos-ak-snc6/264510_232961963399330_8192909_n.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, true, 'newsme', '時事達人', 'curator5@9x9.tv', '網羅時事一把罩', 'http://www.greekshares.com/uploads/image/latest_news_greekshares.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, false,'apha',  '阿發', 'curator6@9x9.tv', '人生就是開心就好，簡簡單單的生活足矣！', 'http://etch.s.dpool.sina.com.cn/nd/dataent/moviepic/pics/59/moviepic_a550a67604ae0c89fb734631aa4ea5d9.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, false,'mengjie',  'Mengjie', 'curator7@9x9.tv', 'Hi，這是我的頻道。', 'http://a4.sphotos.ak.fbcdn.net/hphotos-ak-ash3/39913_1406015591115_1687309_n.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, false,'grass',  '細草，有風飄飄。', 'curator8@9x9.tv', '時間，會告訴你甚麼是愛。時間，會證明一切。預言和詛咒的差別。', 'http://www.qqxoo.com/uploads/allimg/120730/9-120I01J6440-L.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, false,'amulo',  '阿姆羅', 'curator9@9x9.tv', '你能保證戰鬥完了後可以好好睡一覺嗎????', 'http://gd.766.com/h002/h30/img200902021050150.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, false,'weic',  '偽˙善', 'curator10@9x9.tv', '跟一般人一樣，單純的存在著. 如果說我能為大家帶來甚麼, 或許是那微不足道但真誠的，話語', 'http://pica.nipic.com/2007-06-12/2007612211417720_2.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, false,'wulala',  '烏拉拉', 'curator11@9x9.tv', '只要一秒鐘 讓你呵呵笑出來！', 'http://pic.pimg.tw/octa1113/1685f9b90ecbfe1b48663ca6e5df3416.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, false,'archer',  'archer', 'curator12@9x9.tv', 'To be yourself', 'http://www.xpcolor.com/wallpaper/UploadPic/2007-12/200712502827771.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, false,'debbie',  'Debbie', 'curator13@9x9.tv', '不完美才是完美', 'http://image.tpwang.net/image/%E8%89%BE/artist-%E8%89%BE%E8%96%87%E5%85%92%C2%B7%E6%8B%89%E7%B6%AD%E5%B0%BC/%E8%89%BE%E8%96%87%E5%85%92%C2%B7%E6%8B%89%E7%B6%AD%E5%B0%BC192371.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, false,'sumer',  'sumer', 'curator14@9x9.tv', 'Keep in faith', 'http://motorcyclehdwallpaper.com/?attachment_id=473');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, false,'dpd',  '大排檔', 'curator15@9x9.tv', '整理了一堆雜七雜八的節目，歡迎訂閱！', '');                             
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, true, 'rong', 'RONG', 'curator16@9x9.tv', '來自四次原星球，喜好追求新事物，喜歡就訂閱我的頻道吧', 'http://a6.sphotos.ak.fbcdn.net/hphotos-ak-snc6/s720x720/216077_525923707423517_1297698671_n.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, true, 'sing', '思吟', 'curator17@9x9.tv', 'Europe travel', 'https://fbcdn-sphotos-f-a.akamaihd.net/hphotos-ak-ash4/488324_3816646129815_373229457_n.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, true, 'jasonl', 'Jason Lee', 'curator18@9x9.tv', 'Sensation 電音派對', 'http://profile.ak.fbcdn.net/hprofile-ak-ash4/275985_100001674112594_2144873977_n.jpg');
insert into nnuser (type, shard, featured, profileUrl, name, email, intro, imageUrl) values (4, 1, true, 'kingw', '金木義則', 'curator19@9x9.tv', '嚴選音樂，就在Music Day', 'http://profile.ak.fbcdn.net/hprofile-ak-snc7/368861_100002766796163_971690919_n.jpg');
insert into nnuser (name, email, intro, imageUrl) values ('', 'curator16@9x9.tv', '', '');                                        

* migrate nnuser profile data            
*                                            


====================================================================================================================================================================
use nncloudtv_content;
drop table category;
CREATE TABLE `category` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `channelCnt` int(11) NOT NULL DEFAULT '0',
  `createDate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `isPublic` bit(1) NOT NULL,
  `lang` varchar(5) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
  `seq` smallint(6) NOT NULL,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
  `updateDate`  DEFAULT NULL,
  `tag` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=35 DEFAULT CHARSET=utf8

CREATE TABLE `nnepisode` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
  `imageUrl` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
  `intro` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
  `channelId` bigint(20) DEFAULT '0',
  `adId` bigint(20) DEFAULT '0',
  `publishDate` timestamp,
  `updateDate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;

CREATE TABLE `title_card` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `color` varchar(20) DEFAULT NULL,
  `align` varchar(20) DEFAULT NULL,
  `effect` varchar(20) DEFAULT NULL,
  `bgColor` varchar(20) DEFAULT NULL,
  `channelId` bigint(20) NOT NULL,
  `duration` varchar(255) DEFAULT NULL,
  `message` varchar(255) DEFAULT NULL,
  `bgImage` varchar(255) DEFAULT NULL,
  `playerSyntax` varchar(500) NOT NULL,
  `size` varchar(20) DEFAULT NULL,
  `style` varchar(20) DEFAULT NULL,
  `type` smallint(6) DEFAULT NULL,
  `updateDate` datetime DEFAULT NULL,
  `programId` bigint(20) DEFAULT NULL,
  `weight` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8; 

CREATE TABLE `tag` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
  `updateDate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1177 DEFAULT CHARSET=utf8;

CREATE TABLE `tag_map` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `tagId` bigint(20) NOT NULL,
  `channelId` bigint(20) NOT NULL,
  `updateDate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `tagMap` (`tagId`,`channelId`)
) ENGINE=InnoDB AUTO_INCREMENT=2428 DEFAULT CHARSET=utf8;

CREATE TABLE `category_map` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `categoryId` bigint(20) NOT NULL,
  `channelId` bigint(20) NOT NULL,
  `updateDate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),              
  UNIQUE KEY `categoryMap` (`categoryId`,`channelId`)
) ENGINE=InnoDB AUTO_INCREMENT=439 DEFAULT CHARSET=utf8; 

CREATE TABLE `nnad` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `merchantEmail` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
  `url` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
  `message` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
  `createDate` datetime  NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updateDate` datetime not null,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8;

-----------------------------------------------------
drop table nnuser;   
drop table nnuser_pref;
drop table nnuser_report;
drop table nnuser_share;
drop table nnuser_subscribe;
drop table nnuser_subscribe_group;
drop table pdr;
drop table mso_backup; 
drop table nnchannel_backup;
drop table nnset_autosharing;
drop table nnset_to_nnchannel;          
drop table nnset_to_nnchannel_backup;
drop table nnuser_channel_sorting;
drop table nnuser_watched;
drop table nnguest;
drop table nndevice;
drop table nnchannel_autosharing;
drop table category_backup;
drop table sns_auth;
drop table cnt_subscribe;

-----------------------------------------------------
use nncloudtv_nnuser1;
use nncloudtv_nnuser1;
drop table pdr;
drop table sns_auth;
drop table mso;
drop table nnchannel;                                   
drop table nnprogram;
drop table nnuser_backup;
drop table nnuser_channel_sorting_backup;   
drop table nnuser_pref_backup;
drop table nnuser_subscribe_backup;
drop table captcha;                            
drop table category;
drop table category_to_nnset;     
drop table cnt_subscribe;
drop table content_ownership;
drop table counter;
drop table mso_ipg;
drop table mso_config;
drop table nnchannel_autosharing;
drop table nncontent;
drop table nnset;
drop table nnset_autosharing;
drop table nnset_to_nnchannel;
drop table counter_shard;
drop table nnuser_report;

-----------------------------------------------------    
use nncloudtv_analytics;
drop table mso;
drop table mso_config;
drop table mso_ipg;
drop table nnchannel;
drop table nnset;
drop table nnset_to_nnchannel;
drop table nnuser_pref;
drop table nncontent;
drop table captcha;
drop table category;
drop table category_to_nnset;
drop table content_ownership;
drop table nnchannel_autosharing;
drop table nndevice;
drop table counter;
drop table nnguest;
drop table nnprogram;
drop table nnset_autosharing;
drop table nnuser;
drop table nnuser_channel_sorting;
drop table nnuser_share;
drop table nnuser_subscribe;
drop table nnuser_subscribe_group;
drop table nnuser_watched;
drop table sns_auth;

-----------------------------------------------------
use nncloudtv_nnuser1;
alter table nnuser add column cntSubscribe int(11) default 0;
alter table nnuser add column cntChannel int(11) default 0;
alter table nnuser add column cntFollower int(11) default 0;
alter table nnuser add column profileUrl varchar(255);
alter table nnuser add column expires bigint(20) default 0;
alter table nnuser add column fbId varchar(255);
alter table nnuser add column featured bit(1) default false;

alter table nnuser modify gender smallint(6) null;
alter table nnuser modify isTemp bit(1) null;
alter table nnuser modify msoId smallint(6) null;
alter table nnuser modify type smallint(6) null;
alter table nnuser alter gender set default 0;
alter table nnuser alter isTemp set default false;
alter table nnuser alter msoId set default 1;
alter table nnuser alter type set default 4;
alter table nnuser change createDate createDate TIMESTAMP default CURRENT_TIMESTAMP;
alter table nnuser alter featured set default false;

update nnuser set cntSubscribe = 0;
update nnuser set cntFollower = 0;
update nnuser set cntChannel = 0;

use nncloudtv_content;
alter table nnchannel alter cntSubscribe set default 0;
alter table nnchannel add column poolType smallint(6)  default 0;
alter table nnchannel add column sphere varchar(5) default 'en';
alter table nnchannel drop column errorReason;
alter table nnchannel add column cntSubscribe int(11) not null default 0;
alter table nnchannel add column userIdStr varchar(25);
alter table nnchannel add column note varchar(10);
alter table nnchannel add subscribersIdStr varchar(255);
update nnchannel set sphere = lang;
update nnchannel set lang='en', sphere='en' where lang is null;

alter table nnprogram drop column type;
alter table nnprogram add column publishDate datetime;
alter table nnprogram add column startTime varchar(255);
alter table nnprogram add column endTime varchar(255);
alter table add column episodeId bigint(20) default 0;
update nnprogram set publishDate = updateDate;
update nnprogram set episodeId=0;

alter table counter_shard alter count set default 0;
alter table counter_shard alter shardNumber set default 0;

delete from mso_config where id in (2,4);

-----------------------------------------------------
- category.py
- content.py
modify to zh and do again
- jobs/category_tag.py
- jobs/channel_meta.py            
- billboard.py
- trending.py
- subscribe.py
- jobs/hot.py
- curator.py


